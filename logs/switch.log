---- Switch Log ----
Connected to 192.168.0.3:52311
recv switch id 0
File received and saved to: /home/ubuntu/topology.yaml
  Device:           eth1
  My MAC:           FA:16:3E:9A:26:99
  Peer MAC:         FA:16:3E:87:09:4C
  My IP:            172.16.0.21
  Peer IP:          172.16.0.5
  My Port:          4791
  Peer Port:        4791
  My QP:            11
  Peer QP:          18
  PSN:              0
  Device:           eth2
  My MAC:           FA:16:3E:3D:AB:78
  Peer MAC:         FA:16:3E:7B:25:36
  My IP:            10.10.0.14
  Peer IP:          10.10.0.7
  My Port:          4791
  Peer Port:        4791
  My QP:            12
  Peer QP:          81
  PSN:              0
init finish
thread 0 start...
thread 1 start...
================================================
================================================
[SWITCH] Thread 0: Received packet, PSN=0, opcode=0x00
[SWITCH] Thread 0: PSN=0 metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=0, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=1, opcode=0x01
[SWITCH] Thread 0: PSN=1 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=1, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=2, opcode=0x01
[SWITCH] Thread 0: PSN=2 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=2, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=3, opcode=0x02
[SWITCH] Thread 0: PSN=3 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=3, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=4, opcode=0x00
[SWITCH] Thread 0: PSN=4 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=4, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=5, opcode=0x01
[SWITCH] Thread 0: PSN=5 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=5, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=6, opcode=0x01
[SWITCH] Thread 0: PSN=6 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=6, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=7, opcode=0x02
[SWITCH] Thread 0: PSN=7 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=7, op_type=1, root_rank=0, len=256
[SWITCH] Thread 1: Received packet, PSN=0, opcode=0x00
[SWITCH] Thread 1: PSN=0 metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=0, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=0, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=0
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=1, opcode=0x01
[SWITCH] Thread 1: PSN=1 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=1, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=1, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=1
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=2, opcode=0x01
[SWITCH] Thread 1: PSN=2 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=2, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=2, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=2
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=3, opcode=0x02
[SWITCH] Thread 1: PSN=3 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=3, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=3, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=3
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=4, opcode=0x00
[SWITCH] Thread 1: PSN=4 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=4, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=4, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=4
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=5, opcode=0x01
[SWITCH] Thread 1: PSN=5 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=5, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=5, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=5
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=6, opcode=0x01
[SWITCH] Thread 1: PSN=6 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=6, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=6, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=6
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=7, opcode=0x02
[SWITCH] Thread 1: PSN=7 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=7, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=7, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=7
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Thread 0: Received packet, PSN=0, opcode=0x11
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 0: Received packet, PSN=1, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=2, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=3, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=4, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=5, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=6, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=7, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=8, opcode=0x00
[SWITCH] Thread 0: PSN=8 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=8, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=9, opcode=0x01
[SWITCH] Thread 0: PSN=9 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=9, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=10, opcode=0x01
[SWITCH] Thread 0: PSN=10 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=10, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=11, opcode=0x02
[SWITCH] Thread 0: PSN=11 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=11, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=12, opcode=0x00
[SWITCH] Thread 0: PSN=12 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=12, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=13, opcode=0x01
[SWITCH] Thread 0: PSN=13 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=13, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=14, opcode=0x01
[SWITCH] Thread 0: PSN=14 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=14, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=15, opcode=0x02
[SWITCH] Thread 0: PSN=15 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=15, op_type=1, root_rank=0, len=256
[SWITCH] Thread 1: Received packet, PSN=8, opcode=0x00
[SWITCH] Thread 1: PSN=8 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=8, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=8, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=8
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=9, opcode=0x01
[SWITCH] Thread 1: PSN=9 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=9, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=9, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=9
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=10, opcode=0x01
[SWITCH] Thread 1: PSN=10 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=10, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=10, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=10
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=11, opcode=0x02
[SWITCH] Thread 1: PSN=11 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=11, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=11, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=11
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=12, opcode=0x00
[SWITCH] Thread 1: PSN=12 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=12, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=12, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=12
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=13, opcode=0x01
[SWITCH] Thread 1: PSN=13 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=13, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=13, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=13
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=14, opcode=0x01
[SWITCH] Thread 1: PSN=14 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=14, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=14, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=14
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=15, opcode=0x02
[SWITCH] Thread 1: PSN=15 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=15, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=15, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=15
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 0: Received packet, PSN=8, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=9, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=10, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=11, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=16, opcode=0x00
[SWITCH] Thread 0: PSN=16 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=16, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=17, opcode=0x01
[SWITCH] Thread 0: PSN=17 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=17, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=18, opcode=0x01
[SWITCH] Thread 0: PSN=18 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=18, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=19, opcode=0x02
[SWITCH] Thread 0: PSN=19 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=19, op_type=1, root_rank=0, len=256
[SWITCH] Thread 0: Received packet, PSN=12, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=13, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=14, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=15, opcode=0x11
[SWITCH] Thread 1: Received packet, PSN=16, opcode=0x00
[SWITCH] Thread 1: PSN=16 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=16, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=16, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=16
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=17, opcode=0x01
[SWITCH] Thread 1: PSN=17 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=17, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=17, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=17
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=18, opcode=0x01
[SWITCH] Thread 1: PSN=18 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=18, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=18, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=18
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 1: Received packet, PSN=19, opcode=0x02
[SWITCH] Thread 1: PSN=19 using global metadata - op_type=1, root_rank=0
[SWITCH] aggregate: PSN=19, op_type=1, root_rank=0, len=256
[SWITCH] Aggregation complete for PSN=19, degree=2/2
[SWITCH] REDUCE operation: sending to root_rank=0, PSN=19
[SWITCH] Checking rank_to_conn[0]=0 vs root_rank=0
[SWITCH] Found target connection: conn_id=0
[SWITCH] Sending Reduce result: size=1082 bytes
[SWITCH] Reduce result sent successfully to rank 0
[SWITCH] Thread 0: Received packet, PSN=16, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=17, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=18, opcode=0x11
[SWITCH] Thread 0: Received packet, PSN=19, opcode=0x11
